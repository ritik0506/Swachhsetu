# CreateReport - Visual Flow Diagram

## Component Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CREATE REPORT PAGE                         â”‚
â”‚                    /create-report route                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Global AI Loading Indicator                                    â”‚
â”‚  âŸ³ AI Processing in Progress... (when isGlobalAILoading=true) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [1] UPLOAD IMAGE                                     * Required â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  SmartImageUpload Component                               â”‚ â”‚
â”‚  â”‚  â€¢ Drag & drop zone                                       â”‚ â”‚
â”‚  â”‚  â€¢ Client-side resize (1024px)                            â”‚ â”‚
â”‚  â”‚  â€¢ Auto API call â†’ POST /api/ai/forensic/analyze          â”‚ â”‚
â”‚  â”‚  â€¢ Loading: "Scanning for Spam..."                        â”‚ â”‚
â”‚  â”‚  â€¢ Success: âœ… Verified badge + category + description     â”‚ â”‚
â”‚  â”‚  â€¢ Error: âŒ Spam reason + "Try Again" button             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  Auto-fills:                                                      â”‚
â”‚  â†’ formData.category = "Pothole"                                 â”‚
â”‚  â†’ formData.description = "Deep pothole on main road..."         â”‚
â”‚  â†’ formData.severity = "high" (from severity_score)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [2] VOICE DESCRIPTION                                  Optional â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  VoiceInput Component                                     â”‚ â”‚
â”‚  â”‚  â€¢ Microphone button                                      â”‚ â”‚
â”‚  â”‚  â€¢ Audio visualization (real-time bars)                   â”‚ â”‚
â”‚  â”‚  â€¢ Recording: 0:45 / 1:00                                 â”‚ â”‚
â”‚  â”‚  â€¢ Auto API call â†’ POST /api/ai/linguistic/analyze        â”‚ â”‚
â”‚  â”‚  â€¢ Processing: "Transcribing and analyzing..."            â”‚ â”‚
â”‚  â”‚  â€¢ Success: Transcript + language badge + sentiment       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  Auto-fills:                                                      â”‚
â”‚  â†’ formData.description = "Pothole on MG Road" (transcription)   â”‚
â”‚  â†’ formData.severity = "high" (from urgency "High")              â”‚
â”‚  â†’ Shows: "ğŸ“ Location detected: Near City Hospital"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [3] REPORT DETAILS                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Category * (select dropdown)                             â”‚ â”‚
â”‚  â”‚  [Pothole â–¼]     â† AI detected: Pothole                   â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Title * (text input)                                      â”‚ â”‚
â”‚  â”‚  [Pothole on Road_______________]                          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Description * (textarea)                                  â”‚ â”‚
â”‚  â”‚  [Deep pothole approximately    ]  â† AI suggested          â”‚ â”‚
â”‚  â”‚  [1 meter wide on main road...  ]  â† From voice: English   â”‚ â”‚
â”‚  â”‚  [                              ]                           â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Severity (radio buttons)      â† AI score: 7/10           â”‚ â”‚
â”‚  â”‚  âš« Low    âš« Medium    ğŸ”´ High                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [4] LOCATION                                         * Required â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LocationVerifier Component                               â”‚ â”‚
â”‚  â”‚  â€¢ [ğŸ“ Auto-Detect Location] [ğŸ“Œ Enter Manually]          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  GPS Coordinates:                                          â”‚ â”‚
â”‚  â”‚  28.613900, 77.209000   (Accuracy: Â±15m)                  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Address * (textarea)                                      â”‚ â”‚
â”‚  â”‚  [123 Main Street, Connaught Place, New Delhi 110001]     â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Landmark (optional)                                       â”‚ â”‚
â”‚  â”‚  [Near Metro Station____________]                          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  âœ… Verified badge                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SUBMIT BUTTON                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  [âœ“ Submit Report] (enabled when all complete)            â”‚ â”‚
â”‚  â”‚  OR                                                         â”‚ â”‚
â”‚  â”‚  [âš  Complete All Fields to Submit] (disabled)             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  Completion Status:                                              â”‚
â”‚  âœ“ Image Verified      âœ“ Category Selected                      â”‚
â”‚  âœ“ Title Added         âœ“ Description Added                      â”‚
â”‚  âœ“ Location Verified   âœ“ AI Processing                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Relay Race State Machine

```
                    Initial State
                         â”‚
                    [All Enabled]
                         â”‚
         User uploads image â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚           â”‚
                         â–¼           â”‚
              setGlobalAILoading(true)
                         â”‚           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
              â”‚                    â”‚ â”‚
              â–¼                    â–¼ â”‚
        [Voice DISABLED]  [Location DISABLED]
              â”‚                    â”‚ â”‚
              â”‚                    â”‚ â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                         â”‚           â”‚
                         â–¼           â”‚
              Image verification     â”‚
              (3-5 seconds)          â”‚
                         â”‚           â”‚
                         â–¼           â”‚
              setGlobalAILoading(false)
                         â”‚           â”‚
                         â–¼           â”‚
                    [All Enabled] â—„â”€â”€â”˜
                         â”‚
         User records voice â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚            â”‚
                         â–¼            â”‚
              setGlobalAILoading(true)
                         â”‚            â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
              â”‚                     â”‚ â”‚
              â–¼                     â–¼ â”‚
    [Image DISABLED]   [Location DISABLED]
              â”‚                     â”‚ â”‚
              â”‚                     â”‚ â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                         â”‚            â”‚
                         â–¼            â”‚
              Voice processing        â”‚
              (5-10 seconds)          â”‚
                         â”‚            â”‚
                         â–¼            â”‚
              setGlobalAILoading(false)
                         â”‚            â”‚
                         â–¼            â”‚
                    [All Enabled] â—„â”€â”€â”€â”˜
                         â”‚
                         â–¼
                [Ready to Submit]
```

---

## Data Flow: User Actions â†’ State Updates â†’ UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Action    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Component Event Handler                â”‚
â”‚  â€¢ handleImageVerify(result)            â”‚
â”‚  â€¢ handleVoiceChange(voiceData)         â”‚
â”‚  â€¢ handleLocationChange(locationData)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Update formData State                  â”‚
â”‚  setFormData(prev => ({                 â”‚
â”‚    ...prev,                             â”‚
â”‚    category: result.civic_category,     â”‚
â”‚    description: result.visual_evidence  â”‚
â”‚  }))                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React Re-render                        â”‚
â”‚  â€¢ Update input values                  â”‚
â”‚  â€¢ Update badges                        â”‚
â”‚  â€¢ Update completion checklist          â”‚
â”‚  â€¢ Enable/disable submit button         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI Updates     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Call Sequence

```
Frontend                          Backend                      Ollama
   â”‚                                 â”‚                           â”‚
   â”‚  1. Upload Image                â”‚                           â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                           â”‚
   â”‚  POST /api/ai/forensic/analyze  â”‚                           â”‚
   â”‚  FormData { image: File }       â”‚                           â”‚
   â”‚                                 â”‚  2. Call LLaVA model      â”‚
   â”‚                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                                 â”‚  Analyze image for spam   â”‚
   â”‚                                 â”‚  Classify civic category  â”‚
   â”‚                                 â”‚                           â”‚
   â”‚                                 â”‚  3. Return analysis       â”‚
   â”‚                                 â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  4. Return result               â”‚                           â”‚
   â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
   â”‚  { is_spam, civic_category,     â”‚                           â”‚
   â”‚    visual_evidence, ... }       â”‚                           â”‚
   â”‚                                 â”‚                           â”‚
   â”‚  5. Record Voice                â”‚                           â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                           â”‚
   â”‚  POST /api/ai/linguistic/analyzeâ”‚                           â”‚
   â”‚  { audio: base64, format }      â”‚                           â”‚
   â”‚                                 â”‚  6. Call Llama3 model     â”‚
   â”‚                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                                 â”‚  Transcribe audio         â”‚
   â”‚                                 â”‚  Detect language          â”‚
   â”‚                                 â”‚  Analyze sentiment        â”‚
   â”‚                                 â”‚                           â”‚
   â”‚                                 â”‚  7. Return analysis       â”‚
   â”‚                                 â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  8. Return result               â”‚                           â”‚
   â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
   â”‚  { english_translation,         â”‚                           â”‚
   â”‚    sentiment_tone, ... }        â”‚                           â”‚
   â”‚                                 â”‚                           â”‚
   â”‚  9. Submit Report               â”‚                           â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                           â”‚
   â”‚  POST /api/reports              â”‚                           â”‚
   â”‚  FormData { title, description, â”‚                           â”‚
   â”‚    image, location, aiAnalysis }â”‚                           â”‚
   â”‚                                 â”‚  10. Save to MongoDB      â”‚
   â”‚                                 â”‚                           â”‚
   â”‚  11. Return success             â”‚                           â”‚
   â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
   â”‚  { success: true, report }      â”‚                           â”‚
   â”‚                                 â”‚                           â”‚
   â”‚  12. Navigate to dashboard      â”‚                           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Form Validation State Machine

```
                 Initial State
                      â”‚
                 [Incomplete]
                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                       â”‚
          â–¼                       â–¼
    User fills field        User skips field
          â”‚                       â”‚
          â–¼                       â–¼
    Check all fields        [Still Incomplete]
          â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                â”‚
    â”‚           â”‚                â”‚
    â–¼           â–¼                â”‚
[Missing]  [All Present]         â”‚
    â”‚           â”‚                â”‚
    â”‚           â–¼                â”‚
    â”‚    Check verification      â”‚
    â”‚           â”‚                â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”          â”‚
    â”‚     â”‚           â”‚          â”‚
    â”‚     â–¼           â–¼          â”‚
    â”‚  [Not      [Verified]      â”‚
    â”‚  Verified]     â”‚           â”‚
    â”‚     â”‚          â”‚           â”‚
    â”‚     â”‚          â–¼           â”‚
    â”‚     â”‚    Check AI loading  â”‚
    â”‚     â”‚          â”‚           â”‚
    â”‚     â”‚     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”      â”‚
    â”‚     â”‚     â”‚         â”‚      â”‚
    â”‚     â”‚     â–¼         â–¼      â”‚
    â”‚     â”‚  [Loading] [Ready]   â”‚
    â”‚     â”‚     â”‚         â”‚      â”‚
    â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
          â”‚                      â”‚
          â–¼                      â”‚
    [Submit DISABLED] â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
    [Submit ENABLED]
```

---

## Component Communication

```
CreateReport.jsx (Parent)
    â”‚
    â”œâ”€â”€ isGlobalAILoading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   (shared state)                    â”‚
    â”‚                                     â”‚
    â”œâ”€â”€ SmartImageUpload                  â”‚
    â”‚   â”‚                                 â”‚
    â”‚   â”œâ”€ Props IN:                      â”‚
    â”‚   â”‚  â€¢ isGlobalAILoading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   â”‚  â€¢ setGlobalAILoading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   â”‚                                 â”‚
    â”‚   â”œâ”€ Callbacks OUT:                 â”‚
    â”‚   â”‚  â€¢ onVerify(result) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º handleImageVerify()
    â”‚   â”‚  â€¢ onChange(file) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º handleImageChange()
    â”‚   â”‚                                 â”‚
    â”‚   â””â”€ Effects:                       â”‚
    â”‚      â€¢ setGlobalAILoading(true) â”€â”€â”€â”€â”¤
    â”‚      â€¢ setGlobalAILoading(false) â”€â”€â”€â”¤
    â”‚                                     â”‚
    â”œâ”€â”€ VoiceInput                        â”‚
    â”‚   â”‚                                 â”‚
    â”‚   â”œâ”€ Props IN:                      â”‚
    â”‚   â”‚  â€¢ isGlobalAILoading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   â”‚  â€¢ setGlobalAILoading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   â”‚                                 â”‚
    â”‚   â”œâ”€ Callbacks OUT:                 â”‚
    â”‚   â”‚  â€¢ onChange(voiceData) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º handleVoiceChange()
    â”‚   â”‚                                 â”‚
    â”‚   â””â”€ Effects:                       â”‚
    â”‚      â€¢ setGlobalAILoading(true) â”€â”€â”€â”€â”¤
    â”‚      â€¢ setGlobalAILoading(false) â”€â”€â”€â”¤
    â”‚                                     â”‚
    â””â”€â”€ LocationVerifier                  â”‚
        â”‚                                 â”‚
        â”œâ”€ Props IN:                      â”‚
        â”‚  â€¢ isGlobalAILoading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚  â€¢ setGlobalAILoading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                                 â”‚
        â”œâ”€ Callbacks OUT:                 â”‚
        â”‚  â€¢ onChange(locationData) â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º handleLocationChange()
        â”‚                                 â”‚
        â””â”€ Effects:                       â”‚
           â€¢ setGlobalAILoading(true) â”€â”€â”€â”€â”˜
           â€¢ setGlobalAILoading(false)
```

---

## Error Handling Flow

```
                API Call
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Try Block    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                   â”‚
          â–¼                   â–¼
     [Success]           [Error]
          â”‚                   â”‚
          â”‚                   â–¼
          â”‚           Catch Block
          â”‚                   â”‚
          â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
          â”‚           â”‚               â”‚
          â”‚           â–¼               â–¼
          â”‚     [Network Error]  [API Error]
          â”‚           â”‚               â”‚
          â”‚           â–¼               â–¼
          â”‚      setError()      setError()
          â”‚           â”‚               â”‚
          â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚
          â”‚                   â–¼
          â”‚         Show red banner
          â”‚         with error message
          â”‚                   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚
                                           â–¼
                                    Finally Block
                                           â”‚
                                           â–¼
                              setIsVerifying(false)
                              setGlobalAILoading(false)
                                           â”‚
                                           â–¼
                                  Re-enable buttons
```

---

## Submit Flow Diagram

```
User clicks Submit
      â”‚
      â–¼
validateForm()
      â”‚
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
â”‚           â”‚
â–¼           â–¼
[Valid]  [Invalid]
â”‚           â”‚
â”‚           â–¼
â”‚     Show errors
â”‚     toast.error()
â”‚     return
â”‚
â–¼
setIsSubmitting(true)
      â”‚
      â–¼
Create FormData
      â”‚
      â”œâ”€ title
      â”œâ”€ description
      â”œâ”€ category
      â”œâ”€ severity
      â”œâ”€ image (File)
      â”œâ”€ latitude
      â”œâ”€ longitude
      â”œâ”€ address
      â”œâ”€ landmark
      â””â”€ aiAnalysis (JSON)
      â”‚
      â–¼
POST /api/reports
      â”‚
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
â”‚           â”‚
â–¼           â–¼
[Success] [Error]
â”‚           â”‚
â”‚           â–¼
â”‚     toast.error()
â”‚     setIsSubmitting(false)
â”‚     return
â”‚
â–¼
toast.success()
      â”‚
      â–¼
navigate('/dashboard')
      â”‚
      â–¼
setIsSubmitting(false)
```

---

## Complete User Journey

```
1. User visits /create-report
         â”‚
         â–¼
2. Page loads with 4 empty sections
         â”‚
         â–¼
3. User uploads image
         â”‚
         â”œâ”€ Drag & drop OR click to browse
         â”‚
         â–¼
4. Image resized client-side (1024px)
         â”‚
         â–¼
5. Auto API call: POST /api/ai/forensic/analyze
         â”‚
         â”œâ”€ Loading: "Scanning for Spam..."
         â”‚
         â–¼
6. Result received (3-5 seconds)
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
 [Spam]   [Valid]
    â”‚         â”‚
    â”‚         â–¼
    â”‚    âœ… Verified badge
    â”‚         â”‚
    â”‚         â–¼
    â”‚    Auto-fill:
    â”‚    â€¢ Category: "Pothole"
    â”‚    â€¢ Description: "Deep pothole..."
    â”‚    â€¢ Severity: "High"
    â”‚         â”‚
    â–¼         â–¼
  User tries  User proceeds
  again â—„â”€â”€â”€â”     â”‚
            â”‚     â–¼
            â”‚  7. User clicks "Start Recording"
            â”‚     â”‚
            â”‚     â”œâ”€ Grant mic permission
            â”‚     â”‚
            â”‚     â–¼
            â”‚  8. User speaks in Hindi
            â”‚     â”‚
            â”‚     â–¼
            â”‚  9. User clicks "Stop Recording"
            â”‚     â”‚
            â”‚     â–¼
            â”‚  10. Auto API call: POST /api/ai/linguistic/analyze
            â”‚     â”‚
            â”‚     â”œâ”€ Processing: "Transcribing..."
            â”‚     â”‚
            â”‚     â–¼
            â”‚  11. Result received (5-10 seconds)
            â”‚     â”‚
            â”‚     â–¼
            â”‚    Transcription displayed
            â”‚    â€¢ Language: "Hindi"
            â”‚    â€¢ Sentiment: "Frustrated"
            â”‚    â€¢ Urgency: "High"
            â”‚     â”‚
            â”‚     â–¼
            â”‚    Auto-fill:
            â”‚    â€¢ Description: Updated with voice
            â”‚    â€¢ Severity: "High" (from urgency)
            â”‚     â”‚
            â”‚     â–¼
            â”‚  12. User reviews/edits fields
            â”‚     â”‚
            â”‚     â–¼
            â”‚  13. User clicks "Auto-Detect Location"
            â”‚     â”‚
            â”‚     â”œâ”€ Grant location permission
            â”‚     â”‚
            â”‚     â–¼
            â”‚  14. GPS coordinates captured (2-3 seconds)
            â”‚     â”‚
            â”‚     â–¼
            â”‚  15. Reverse geocode â†’ Address
            â”‚     â”‚
            â”‚     â–¼
            â”‚    âœ… Location verified
            â”‚    â€¢ GPS: 28.613900, 77.209000
            â”‚    â€¢ Address: "123 Main St, Delhi..."
            â”‚     â”‚
            â”‚     â–¼
            â”‚  16. User optionally adds landmark
            â”‚     â”‚
            â”‚     â–¼
            â”‚  17. All fields complete
            â”‚     â”‚
            â”‚     â–¼
            â”‚  18. Submit button enabled
            â”‚     â”‚
            â”‚     â–¼
            â”‚  19. User clicks "Submit Report"
            â”‚     â”‚
            â”‚     â–¼
            â”‚  20. Form validation
            â”‚     â”‚
            â”‚     â–¼
            â”‚  21. POST /api/reports
            â”‚     â”‚
            â”‚     â–¼
            â”‚  22. Report saved to database
            â”‚     â”‚
            â”‚     â–¼
            â”‚  23. Success toast
            â”‚     â”‚
            â”‚     â–¼
            â”‚  24. Navigate to /dashboard
            â”‚     â”‚
            â”‚     â–¼
            â”‚  25. User sees new report in list
            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This visual guide shows the complete flow of the CreateReport page! ğŸ“Š
